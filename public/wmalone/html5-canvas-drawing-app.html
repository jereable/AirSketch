<!DOCTYPE html>
<html>
  <head>
    <title>Create HTML5 Canvas JavaScript Drawing App Example</title>
  </head>
  <body>
    <div id="canvasDiv"></div>
    <!--[if IE]><script type="text/javascript" src="excanvas.js"></script><![endif]-->
    <script type="text/javascript" src="html5-canvas-drawing-app.js"></script>
    <script type="text/javascript">
    	 drawingApp.init();
	</script>
	<input id="messageSender" type="text"></input>
	<script>
    // Luo WebSocket
		var kickassSocket = new WebSocket(window.location.origin.replace("http", "ws") + "/echo", "message");
    // Haetaan messageSender input
    var input = document.getElementById("messageSender");
    // Tehdään 'jotain' kun inputtiin kirjoitetaan
		input.oninput = function(event) {
      // Lähetetään WebSockettiin inputin sisältö
			kickassSocket.send(event.target.value);
		}
    // Kun WebSocketista tulee viesti tee jotain
		kickassSocket.onmessage = function(event) {
      // Asetetaan inputin arvoksi event data
			input.value = event.data;
      var koordinaatit = JSON.parse(event.data);
      // Piirretään eventistä löytyvä koordinaatti canvakselle
      serverInitiatedPress.bind(document.getElementById('canvas'))({pageX: koordinaatit.x, pageY: koordinaatit.y});

		}
	</script>
  </body>
</html>
